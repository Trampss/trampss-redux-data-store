var n,t,r=function(n){return"@@krf/"+n.toUpperCase()},e=function(n){return function(t){return(n?">":"")+n+">"+t}},u=function(n){return function(t){return r("SET"+e(n)(t))}},i=function(n){return function(t){return function(r){return{type:u(n)(t),payload:r}}}},o=function(n){return function(t){return r("RESET"+e(n)(t))}},c=function(n){return function(t){return function(){return{type:o(n)(t)}}}},a=function(n){return function(t){return r("ADD"+e(n)(t))}},f=function(n){return function(t){return r("UPDATE"+e(n)(t))}},s=function(n){return function(t){return function(r){return{type:f(n)(t),payload:r}}}},d=function(n){return function(t){return r("REMOVE"+e(n)(t))}},y=function(n){return function(t){return r("ADD_OR_UPDATE"+e(n)(t))}},p={set:i,SET:u,add:function(n){return function(t){return function(r){return{type:a(n)(t),payload:r}}}},ADD:a,reset:c,RESET:o,remove:function(n){return function(t){return function(r){return{type:d(n)(t),payload:r}}}},REMOVE:d,update:s,UPDATE:f,addOrUpdate:function(n){return function(t){return function(r){return{type:y(n)(t),payload:r}}}},ADD_OR_UPDATE:y},l={data:{},keys:[],array:[],initialized:!1},v=function(n){return Array.isArray(n)?n:[n]},g=function(n){return function(t){return Object.assign({},n,{data:t,keys:Object.keys(t),array:Object.values(t),initialized:!0})}},O=function(n,t,r){return g(t)(function(n,t){var r={};return v(t).forEach(function(t){r[t[n]]=t}),r}(n,r))},b=function(n,r,e){var u=e[n];return g(r)(Object.assign({},r.data,((t={})[u]=Object.assign({},r.data[u],e),t)))},j=function(n,t){return void 0!==t?O(n,{},t):l},E=function(t){return function(r){return function(e){return function(i){return function(c,s){void 0===c&&(c=j(t,i)),void 0===s&&(s={});var p=s.payload;switch(s.type){case u(r)(e):return O(t,c,p);case a(r)(e):return function(t,r,e){var u=e[t];return g(r)(Object.assign({},r.data,((n={})[u]=e,n)))}(t,c,p);case y(r)(e):return b(t,c,p);case d(r)(e):return function(n,t,r){var e=v(r),u=Object.assign({},t.data);return e.forEach(function(n){delete u[n]}),g(t)(u)}(0,c,p);case o(r)(e):return j(t,i);case f(r)(e):return function(n){return function(t){return void 0!==n.data[t]}}(c)(p[t])?b(t,c,p):c;default:return c}}}}}};var A=function(n,t){return t.split(".").reduce(function(n,t){return n&&n[t]},n)},m=function(n){return function(t){var r=t,e=n.name,u=n.path;return void 0!==u&&u.length>0&&(r=A(t,u)),r[e]}},D=function(n){return function(t){return function(r){return m(t)(r)[n]}}},k=D("keys"),T=D("array"),h=D("initialized"),U={},w=function(n){return void 0!==n?n:U},R=function(){return function(n){return function(t){return function(r){return function(e,i){void 0===e&&(e=w(r)),void 0===i&&(i={});var c=i.payload;switch(i.type){case u(n)(t):return c;case f(n)(t):return Object.assign({},e,c);case o(n)(t):return w(r);default:return e}}}}}};var S,z,P=function(n){return function(){return function(t){return m(n)(t)}}},V={keyValue:{middlewares:[function(n){return function(t){return function(r){return function(e){return function(u){return void 0===u&&(u={}),Object.assign({},u,{state:E(n)(t)(r)(e)(u.state,u.action)})}}}}}],actions:p,selectors:{getState:m,getKeys:k,getAsArray:T,getLength:function(n){return function(t){return k(n)(t).length}},isInitialized:h,get:function(n){return function(t){return function(r){var e=function(n){return D("data")(n)}(n)(r);return null==t?e:Array.isArray(t)?t.map(function(n){return e[n]}):e[t]}}},getBy:function(n){return function(t,r){return function(e){var u=T(n)(e);return Array.isArray(r)?u.filter(function(n){return r.includes(A(n,t))}):u.filter(function(n){return r===A(n,t)})}}},hasKey:function(n){return function(t){return function(r){return k(n)(r).includes(t)}}}}},simpleObject:{middlewares:[function(n){return function(t){return function(r){return function(e){return function(u){return void 0===u&&(u={}),Object.assign({},u,{state:R(n)(t)(r)(e)(u.state,u.action)})}}}}}],actions:{set:i,SET:u,reset:c,RESET:o,update:s,UPDATE:f},selectors:{get:P,isInitialized:function(n){return function(t){return void 0!==n.defaultData?m(n)(t)!==n.defaultData:P(n)()(t)!==U}}}}};var x={key:"id",type:"keyValue",prefix:""},_=function(n){return void 0===n&&(n={}),function(t){void 0===t&&(t={});var r=Object.assign({},x,t),e=r.key,u=r.type,i=r.prefix,o=r.name,c=r.defaultData,a=V[u];return Object.assign.apply(Object,[function(n){return function(t){return function(r){return function(e){return function(u){return function(i,o){void 0===o&&(o={});var c=o.type;void 0===c&&(c="UNKNOWN");var a={state:i,action:{type:c,payload:o.payload}};return(n.pre||[].concat(n.engine||[],n.post||[])).map(function(n){return n(t)(r)(e)(u)}).forEach(function(n){a=n(a)}),a.state}}}}}}(Object.assign({},n,{engine:a.middlewares}))(e)(i)(o)(c),{krfType:u}].concat(Object.keys(a.actions).map(function(n){return(S={})[n]=a.actions[n](i)(o),S}),Object.keys(a.selectors).map(function(n){return(z={})[n]=a.selectors[n](r),z})))}},K=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},N=function(n){return void 0===n&&(n={}),function(t){return null==t&&K(),function(n){return n.engine||n.pre||n.post}(t)?function(r){return _(t)(Object.assign({},r,n))}:function(n){return!!n.name||"string"==typeof n}(t)?"string"==typeof t?_()(Object.assign({},{name:t},n)):_()(Object.assign({},t,n)):void K()}},I=N({type:"simpleObject"}),M=N({type:"keyValue"});export default N();export{I as simpleObject,M as keyValue};
