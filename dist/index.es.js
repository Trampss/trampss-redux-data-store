var scope=function(t){return"@@krf/"+t.toUpperCase()},getPrefix=function(t){return function(e){return(t?">":"")+t+">"+e}},SET=function(t){return function(e){return scope("SET"+getPrefix(t)(e))}},set=function(t){return function(e){return function(n){return{type:SET(t)(e),payload:n}}}},RESET=function(t){return function(e){return scope("RESET"+getPrefix(t)(e))}},reset=function(t){return function(e){return function(){return{type:RESET(t)(e)}}}},ADD=function(t){return function(e){return scope("ADD"+getPrefix(t)(e))}},add=function(t){return function(e){return function(n){return{type:ADD(t)(e),payload:n}}}},UPDATE=function(t){return function(e){return scope("UPDATE"+getPrefix(t)(e))}},update=function(t){return function(e){return function(n){return{type:UPDATE(t)(e),payload:n}}}},REMOVE=function(t){return function(e){return scope("REMOVE"+getPrefix(t)(e))}},remove=function(t){return function(e){return function(n){return{type:REMOVE(t)(e),payload:n}}}},ADD_OR_UPDATE=function(t){return function(e){return scope("ADD_OR_UPDATE"+getPrefix(t)(e))}},addOrUpdate=function(t){return function(e){return function(n){return{type:ADD_OR_UPDATE(t)(e),payload:n}}}},actions={set:set,SET:SET,add:add,ADD:ADD,reset:reset,RESET:RESET,remove:remove,REMOVE:REMOVE,update:update,UPDATE:UPDATE,addOrUpdate:addOrUpdate,ADD_OR_UPDATE:ADD_OR_UPDATE},obj,obj$1,initState={data:{},keys:[],array:[],initialized:!1},getAsArray=function(t){return Array.isArray(t)?t:[t]},toObject=function(t,e){var n={};return getAsArray(e).forEach(function(e){n[e[t]]=e}),n},keyAlreadyExists=function(t){return function(e){return void 0!==t.data[e]}},mapDataToState=function(t){return function(e){return Object.assign({},t,{data:e,keys:Object.keys(e),array:Object.values(e),initialized:!0})}},set$1=function(t,e,n){return mapDataToState(e)(toObject(t,n))},add$1=function(t,e,n){var r=n[t];return mapDataToState(e)(Object.assign({},e.data,((obj={})[r]=n,obj)))},addOrUpdate$1=function(t,e,n){var r=n[t];return mapDataToState(e)(Object.assign({},e.data,((obj$1={})[r]=Object.assign({},e.data[r],n),obj$1)))},remove$1=function(t,e,n){var r=getAsArray(n),a=Object.assign({},e.data);return r.forEach(function(t){delete a[t]}),mapDataToState(e)(a)},defaultState=function(t,e){return void 0!==e?set$1(t,{},e):initState},reducer=function(t){return function(e){return function(n){return function(r){return function(a,u){void 0===a&&(a=defaultState(t,r)),void 0===u&&(u={});var i=u.payload;switch(u.type){case SET(e)(n):return set$1(t,a,i);case ADD(e)(n):return add$1(t,a,i);case ADD_OR_UPDATE(e)(n):return addOrUpdate$1(t,a,i);case REMOVE(e)(n):return remove$1(t,a,i);case RESET(e)(n):return defaultState(t,r);case UPDATE(e)(n):return keyAlreadyExists(a)(i[t])?addOrUpdate$1(t,a,i):a;default:return a}}}}}};function middleware(t){return function(e){return function(n){return function(r){return function(a){return void 0===a&&(a={}),Object.assign({},a,{state:reducer(t)(e)(n)(r)(a.state,a.action)})}}}}}var getFromPath=function(data,path){try{return eval("data."+path)}catch(t){return}},getState=function(t){return function(e){var n=e,r=t.name,a=t.path;return void 0!==a&&a.length>0&&(n=getFromPath(e,a)),n[r]}},getFactory=function(t){return function(e){return function(n){return getState(e)(n)[t]}}},getKeys=getFactory("keys"),getAsArray$1=getFactory("array"),getLength=function(t){return function(e){return getKeys(t)(e).length}},isInitialized=getFactory("initialized"),getData=function(t){return getFactory("data")(t)},get=function(t){return function(e){return function(n){var r=getData(t)(n);return null==e?r:Array.isArray(e)?e.map(function(t){return r[t]}):r[e]}}},getBy=function(t){return function(e,n){return function(r){var a=getAsArray$1(t)(r);return Array.isArray(n)?a.filter(function(t){return n.includes(getFromPath(t,e))}):a.filter(function(t){return n===getFromPath(t,e)})}}},hasKey=function(t){return function(e){return function(n){return getKeys(t)(n).includes(e)}}},selectors={getState:getState,getKeys:getKeys,getAsArray:getAsArray$1,getLength:getLength,isInitialized:isInitialized,get:get,getBy:getBy,hasKey:hasKey},index={middlewares:[middleware],actions:actions,selectors:selectors},actions$1={set:set,SET:SET,reset:reset,RESET:RESET,update:update,UPDATE:UPDATE},initState$1={},defaultState$1=function(t){return void 0!==t?t:initState$1},reducer$1=function(){return function(t){return function(e){return function(n){return function(r,a){void 0===r&&(r=defaultState$1(n)),void 0===a&&(a={});var u=a.payload;switch(a.type){case SET(t)(e):return u;case UPDATE(t)(e):return Object.assign({},r,u);case RESET(t)(e):return defaultState$1(n);default:return r}}}}}};function middleware$1(t){return function(e){return function(n){return function(r){return function(a){return void 0===a&&(a={}),Object.assign({},a,{state:reducer$1(t)(e)(n)(r)(a.state,a.action)})}}}}}var get$1=function(t){return function(){return function(e){return getState(t)(e)}}},isInitialized$1=function(t){return function(e){return void 0!==t.defaultData?getState(t)(e)!==t.defaultData:get$1(t)()(e)!==initState$1}},selectors$1={get:get$1,isInitialized:isInitialized$1},index$1={middlewares:[middleware$1],actions:actions$1,selectors:selectors$1},types={keyValue:index,simpleObject:index$1},obj$2,obj$1$1;function reducer$2(t){return function(e){return function(n){return function(r){return function(a){return function(u,i){void 0===i&&(i={});var o=i.type;void 0===o&&(o="UNKNOWN");var c={state:u,action:{type:o,payload:i.payload}};return(t.pre||[].concat(t.engine||[],t.post||[])).map(function(t){return t(e)(n)(r)(a)}).forEach(function(t){c=t(c)}),c.state}}}}}}var getWrappedStore=function(t){return void 0===t&&(t={}),function(e){var n=e.key,r=e.type;void 0===r&&(r="keyValue");var a=e.prefix;void 0===a&&(a="");var u=e.name,i=e.defaultData,o=types[r];return Object.assign.apply(Object,[reducer$2(Object.assign({},t,{engine:o.middlewares}))(n)(a)(u)(i),{krfType:r}].concat(Object.keys(o.actions).map(function(t){return(obj$2={})[t]=o.actions[t](a)(u),obj$2}),Object.keys(o.selectors).map(function(t){return(obj$1$1={})[t]=o.selectors[t](e),obj$1$1})))}},error=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},isMiddleware=function(t){return t.engine||t.pre||t.post},isOptions=function(t){return!!t.name||"string"==typeof t},factory=function(t){return void 0===t&&(t={}),function(e){return null==e&&error(),isMiddleware(e)?function(n){return getWrappedStore(e)(Object.assign({},n,t))}:isOptions(e)?"string"==typeof e?getWrappedStore()(Object.assign({},{name:e},t)):getWrappedStore()(Object.assign({},e,t)):void error()}},simpleObject=factory({type:"simpleObject"}),keyValue=factory({type:"keyValue"}),index$2=factory();export default index$2;export{simpleObject,keyValue};
