var n=function(n){return"@@krf/"+n.toUpperCase()},t=function(n){return function(t){return(n?">":"")+n+">"+t}},r=function(r){return function(e){return n("SET"+t(r)(e))}},e=function(n){return function(t){return function(e){return{type:r(n)(t),payload:e}}}},u=function(r){return function(e){return n("RESET"+t(r)(e))}},i=function(n){return function(t){return function(){return{type:u(n)(t)}}}},o=function(r){return function(e){return n("ADD"+t(r)(e))}},c=function(r){return function(e){return n("UPDATE"+t(r)(e))}},a=function(n){return function(t){return function(r){return{type:c(n)(t),payload:r}}}},f=function(r){return function(e){return n("REMOVE"+t(r)(e))}},s=function(r){return function(e){return n("ADD_OR_UPDATE"+t(r)(e))}},p={set:e,SET:r,add:function(n){return function(t){return function(r){return{type:o(n)(t),payload:r}}}},ADD:o,reset:i,RESET:u,remove:function(n){return function(t){return function(r){return{type:f(n)(t),payload:r}}}},REMOVE:f,update:a,UPDATE:c,addOrUpdate:function(n){return function(t){return function(r){return{type:s(n)(t),payload:r}}}},ADD_OR_UPDATE:s},d={data:[],initialized:!1},l=function(n){return Array.isArray(n)?n:[n]},y=function(n,t){return t.map(function(t){return[t[n],t]})},g=function(n){return function(t){return Object.assign({},n,{data:t,initialized:!0})}},m=function(n,t,r){return g(t)(y(n,l(r)))},v=function(n){return function(t,r,e){var u=new Map(r.data);return l(e).forEach(function(r){var e=u.get(r[t]);(n||r)&&u.set(r[t],Object.assign({},e,r))}),0===u.size?r:g(r)(Array.from(u.entries()))}},b=function(n,t){return void 0!==t?m(n,d,t):d},j=function(n){return function(t){return function(e){return function(i){return function(a,p){void 0===a&&(a=b(n,i)),void 0===p&&(p={});var d=p.payload;switch(p.type){case r(t)(e):return m(n,a,d);case o(t)(e):return function(n,t,r){return g(t)(Array.from(new Map(t.data.concat(y(n,l(r))))))}(n,a,d);case s(t)(e):return v(!0)(n,a,d);case f(t)(e):return function(n,t,r){var e=new Map(t.data);return l(r).forEach(function(t){e.delete("object"==typeof t?t[n]:t)}),g(t)(Array.from(e.entries()))}(n,a,d);case u(t)(e):return b(n,i);case c(t)(e):return v(!1)(n,a,d);default:return a}}}}}};var O=function(n,t){return t.split(".").reduce(function(n,t){return n&&n[t]},n)},E=function(n){return function(t){var r=t,e=n.name,u=n.path;return void 0!==u&&u.length>0&&(r=O(t,u)),r[e]}},A=function(n){return function(t){return function(r){return E(t)(r)[n]}}},D=A("initialized"),h=A("data"),w=function(n){return function(t){return new Map(h(n)(t))}},T=function(n){return function(t){return function(r){var e=w(n)(r);return null==t?function(n){return function(t){var r={};return h(n)(t).forEach(function(n){r[n[0]]=n[1]}),r}}(n)(r):Array.isArray(t)?t.map(function(n){return e.get(n)}):e.get(t)}}},k=function(n){return function(t){return Array.from(w(n)(t).values())}},U={},R=function(n){return void 0!==n?n:U},S=function(){return function(n){return function(t){return function(e){return function(i,o){void 0===i&&(i=R(e)),void 0===o&&(o={});var a=o.payload;switch(o.type){case r(n)(t):return a;case c(n)(t):return Object.assign({},i,a);case u(n)(t):return R(e);default:return i}}}}}};var z,M,x=function(n){return function(){return function(t){return E(n)(t)}}},P={middlewares:[function(n){return function(t){return function(r){return function(e){return function(u){return void 0===u&&(u={}),Object.assign({},u,{state:S(n)(t)(r)(e)(u.state,u.action)})}}}}}],actions:{set:e,SET:r,reset:i,RESET:u,update:a,UPDATE:c},selectors:{get:x,isInitialized:function(n){return function(t){return void 0!==n.defaultData?E(n)(t)!==n.defaultData:x(n)()(t)!==U}}}},V={keyValue:{middlewares:[function(n){return function(t){return function(r){return function(e){return function(u){return void 0===u&&(u={}),Object.assign({},u,{state:j(n)(t)(r)(e)(u.state,u.action)})}}}}}],actions:p,selectors:{getState:E,getKeys:function(n){return function(t){return Array.from(w(n)(t).keys())}},getAsArray:k,getLength:function(n){return function(t){return h(n)(t).length}},isInitialized:D,get:T,getBy:function(n){return function(t,r){return function(e){var u=k(n)(e);return Array.isArray(r)?u.filter(function(n){return r.includes(O(n,t))}):u.filter(function(n){return r===O(n,t)})}}},hasKey:function(n){return function(t){return function(r){return!!T(n)(t)(r)}}}}},simple:P,simpleObject:P};var _={key:"id",type:"keyValue",prefix:""},K={bool:!1,string:"",array:[],object:{}},N=function(n){return void 0===n&&(n={}),function(t){void 0===t&&(t={});var r=Object.assign({},_,t),e=r.key,u=r.type,i=r.prefix,o=r.name,c=r.defaultData;"simpleObject"===u&&console.warn('/k-redux-factory/ You are using a deprecated "simpleObject" type. We recommend using one of these types: simple.object, simple.array, simple.bool or simple.string.');var a,f=u.split("."),s=f[0],p=f[1],d=V[s];return"simple"!==s&&"simpleObject"!==u||void 0===(a=c)&&p&&(a=K[p]),Object.assign.apply(Object,[function(n){return function(t){return function(r){return function(e){return function(u){return function(i,o){void 0===o&&(o={});var c=o.type;void 0===c&&(c="UNKNOWN");var a={state:i,action:{type:c,payload:o.payload}};return(n.pre||[].concat(n.engine||[],n.post||[])).map(function(n){return n(t)(r)(e)(u)}).forEach(function(n){a=n(a)}),a.state}}}}}}(Object.assign({},n,{engine:d.middlewares}))(e)(i)(o)(a),{krfType:u}].concat(Object.keys(d.actions).map(function(n){return(z={})[n]=d.actions[n](i)(o),z}),Object.keys(d.selectors).map(function(n){return(M={})[n]=d.selectors[n](r),M})))}},I=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},W=function(n){return void 0===n&&(n={}),function(t){return null==t&&I(),function(n){return n.engine||n.pre||n.post}(t)?function(r){return N(t)(Object.assign({},r,n))}:function(n){return!!n.name||"string"==typeof n}(t)?"string"==typeof t?N()(Object.assign({},{name:t},n)):N()(Object.assign({},t,n)):void I()}},B=W({type:"keyValue"}),C=W({type:"simple"});Object.assign(C,{object:W({type:"simple.object"}),bool:W({type:"simple.bool"}),string:W({type:"simple.string"}),array:W({type:"simple.array"})});var L=C;export default W();export{B as keyValue,C as simple,L as simpleObject};
