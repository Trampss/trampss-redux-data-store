!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lodash/omit"),require("lodash/uniq"),require("lodash/without"),require("lodash/keyBy"),require("lodash/at")):"function"==typeof define&&define.amd?define(["exports","lodash/omit","lodash/uniq","lodash/without","lodash/keyBy","lodash/at"],n):n(t["trampss-redux-factory"]=t["trampss-redux-factory"]||{},t._omit,t._uniq,t._without,t._keyBy,t._at)}(this,function(t,n,r,e,u,a){"use strict";n=n&&"default"in n?n.default:n,r=r&&"default"in r?r.default:r,e=e&&"default"in e?e.default:e,u=u&&"default"in u?u.default:u,a=a&&"default"in a?a.default:a;var i=function(t){return"@trampss/"+t.toUpperCase()},o=function(t){return i("SET_"+t)},c=function(t){return function(n){return{type:o(t),payload:n}}},f=function(t){return i("RESET_"+t)},d=function(t){return function(){return{type:f(t)}}},s=function(t){return i("ADD_"+t)},l=function(t){return i("UPDATE_"+t)},y=function(t){return function(n){return{type:l(t),payload:n}}},p=function(t){return i("REMOVE_"+t)},v=function(t){return i("ADD_OR_UPDATE_"+t)},h=function(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t},m=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},g=function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)},O={data:{},keys:[],array:[],initialized:!1},b=function(t){return function(n,r){return t.array.find(function(t){return t[n]===r})}},E=function(t,n,e){var u=void 0,a=e[t];return u=b(n)(t,a)?n.array.map(function(n){return n[t]===a?e:n}):[].concat(g(n.array),[e]),m({},n,{data:m({},n.data,h({},a,e)),keys:r([].concat(g(n.keys),[a])),array:u,initialized:!0})},A=function(t,n,r){var e=r[t];return m({},n,{data:m({},n.data,h({},e,m({},n.data[e],r))),array:n.array.map(function(n){return n[t]===e?m({},n,r):n})})},j=function(t){return function(a){return function(){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.type,y=c.payload;switch(d){case o(a):return{data:u(y,t),keys:r(y.map(function(n){return n[t]})),array:y,initialized:!0};case s(a):return E(t,i,y);case v(a):return b(i)(t,y[t])?A(t,i,y):E(t,i,y);case l(a):return b(i)(t,y[t])?A(t,i,y):i;case p(a):return m({},i,{data:n(i.data,[y]),keys:e(i.keys,y),array:i.array?i.array.filter(function(n){return n[t]!==y}):[]});case f(a):return O;default:return i}}}}},k=Object.freeze({set:c,SET:o,add:function(t){return function(n){return{type:s(t),payload:n}}},ADD:s,reset:d,RESET:f,remove:function(t){return function(n){return{type:p(t),payload:n}}},REMOVE:p,update:y,UPDATE:l,addOrUpdate:function(t){return function(n){return{type:v(t),payload:n}}},ADD_OR_UPDATE:v}),_=function(t){return function(n){var r=n;return void 0!==t.path&&(r=a(n,t.path)[0]),r[t.name]}},D=function(t){return function(n){return function(r){return _(n)(r)[t]}}},w=D("keys"),T=D("array"),z=D("initialized"),q=function(t){return D("data")(t)},P={middlewares:[function(t){return function(n){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m({},e,{state:j(t)(n)(r)(e.state,e.action)})}}}}],actions:k,selectors:Object.freeze({getState:_,getKeys:w,getAsArray:T,getLength:function(t){return function(n){return w(t)(n).length}},isInitialized:z,get:function(t){return function(n){return function(r){var e=q(t)(r);return n?Array.isArray(n)?n.map(function(t){return e[t]}):e[n]:e}}},getBy:function(t){return function(n,r){return function(e){var u=T(t)(e);return Array.isArray(r)?u.filter(function(t){return r.includes(a(t,n)[0])}):u.filter(function(t){return r===a(t,n)[0]})}}}})},U={},R=function(t){return void 0!==t?t:U},S=function(){return function(t){return function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R(n),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e.type,a=e.payload;switch(u){case o(t):return a;case l(t):return m({},r,a);case f(t):return R(n);default:return r}}}}},x=function(t){return function(){return function(n){return _(t)(n)}}},V={middlewares:[function(t){return function(t){return function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m({},r,{state:S()(t)(n)(r.state,r.action)})}}}}],actions:Object.freeze({set:c,SET:o,reset:d,RESET:f,update:y,UPDATE:l}),selectors:Object.freeze({get:x,isInitialized:function(t){return function(n){return void 0!==t.defaultData?_(t)(n)!==t.defaultData:x(t)()(n)!==U}}})},B=Object.freeze({keyValue:P,simpleObject:V}),M=function(t){return function(n){return function(r){return function(e){return function(u){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.type,o={state:u,action:{type:void 0===i?"UNKNOWN":i,payload:a.payload}};return[].concat(g(t.pre||[]),g(t.engine||[]),g(t.post||[])).map(function(t){return t(n)(r)(e)}).forEach(function(t){o=t(o)}),o.state}}}}},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r=n.key,e=n.type,u=void 0===e?"keyValue":e,a=n.prefix,i=void 0===a?"":a,o=n.name,c=n.defaultData,f=B[u];return Object.assign.apply(Object,[M(m({},t,{engine:f.middlewares}))(r)(""+i+o)(c),{trampssType:u}].concat(g(Object.keys(f.actions).map(function(t){return h({},t,f.actions[t](""+i+o))})),g(Object.keys(f.selectors).map(function(t){return h({},t,f.selectors[t](n))}))))}},I=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},K=function(t){return t.engine||t.pre||t.post},C=function(t){return!!t.name||"string"==typeof t},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){return null!==n&&void 0!==n||I(),K(n)?function(r){return N(n)(m({},r,t))}:C(n)?"string"==typeof n?N()(m({name:n},t)):N()(m({},n,t)):void I()}},W=L({type:"simpleObject"}),F=L({type:"keyValue"}),G=L();t.simpleObject=W,t.keyValue=F,t.default=G,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
