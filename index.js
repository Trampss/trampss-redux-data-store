!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t(n["k-redux-factory"]={},n._)}(this,function(n,t){"use strict";var r=function(n){return"@@krf/"+n.toUpperCase()},e=function(n){return function(t){return(n?">":"")+n+">"+t}},u=function(n){return function(t){return r("SET"+e(n)(t))}},o=function(n){return function(t){return function(r){return{type:u(n)(t),payload:r}}}},i=function(n){return function(t){return r("RESET"+e(n)(t))}},c=function(n){return function(t){return function(){return{type:i(n)(t)}}}},a=function(n){return function(t){return r("ADD"+e(n)(t))}},f=function(n){return function(t){return r("UPDATE"+e(n)(t))}},y=function(n){return function(t){return function(r){return{type:f(n)(t),payload:r}}}},s=function(n){return function(t){return r("REMOVE"+e(n)(t))}},l=function(n){return function(t){return r("ADD_OR_UPDATE"+e(n)(t))}},d=function(n){return function(t){return r("REPLACE"+e(n)(t))}},p=function(n){return function(t){return r("ORDER_BY"+e(n)(t))}},v=Object.freeze({set:o,SET:u,add:function(n){return function(t){return function(r){return{type:a(n)(t),payload:r}}}},ADD:a,reset:c,RESET:i,remove:function(n){return function(t){return function(r){return{type:s(n)(t),payload:r}}}},REMOVE:s,update:y,UPDATE:f,addOrUpdate:function(n){return function(t){return function(r){return{type:l(n)(t),payload:r}}}},ADD_OR_UPDATE:l,replace:function(n){return function(t){return function(r){return{type:d(n)(t),payload:r}}}},REPLACE:d,orderBy:function(n){return function(t){return function(r){return{type:p(n)(t),payload:r}}}},ORDER_BY:p}),b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n},m=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},h=function(){return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,t){var r=[],e=!0,u=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(e=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);e=!0);}catch(n){u=!0,o=n}finally{try{!e&&c.return&&c.return()}finally{if(u)throw o}}return r}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)},O={data:{},keys:[],array:[],initialized:!1},A=function(n,t){var r={};return function(n){return Array.isArray(n)?n:[n]}(t).forEach(function(t){r[t[n]]=t}),r},j=function(n){return function(t){return void 0!==n.data[t]}},D=function(n){return function(t){return m({},n,{data:t,keys:Object.keys(t),array:Object.values(t),initialized:!0})}},k=function(n,t,r){return D(t)(A(n,r))},S=function(n,t,r){var e=r[n];return D(t)(m({},t.data,g({},e,r)))},R=function(n,t,r){var e=r[n];return D(t)(m({},t.data,g({},e,m({},t.data[e],r))))},T=function(n,t){return void 0!==t?k(n,{},t):O},w=function(n){return function(r){return function(e){return function(o){return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T(n,o),y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=y.type,g=y.payload;switch(v){case u(r)(e):return k(n,c,g);case a(r)(e):return S(n,c,g);case l(r)(e):return R(n,c,g);case s(r)(e):return function(n,r,e){return D(r)(t.omit(r.data,[].concat(e)))}(0,c,g);case i(r)(e):return T(n,o);case f(r)(e):return j(c)(g[n])?R(n,c,g):c;case d(r)(e):return j(c)(g[n])?S(n,c,g):c;case p(r)(e):var h=g,E="asc";"object"===(void 0===g?"undefined":b(g))&&g.by&&(h=g.by,E=g.desc?"desc":"asc");var O=t.orderBy(c.array,"string"==typeof h?function(n){return t.get(n,h)}:h,E);return m({},c,{array:O,keys:O.map(function(t){return t[n]})});default:return c}}}}}},z=function(n){return function(r){var e=r,u=n.name,o=n.path;if(void 0!==o&&o.length>0){var i=t.at(r,o);e=h(i,1)[0]}return e[u]}},P=function(n){return function(t){return function(r){return z(t)(r)[n]}}},_=P("keys"),U=P("array"),x=P("initialized"),V={middlewares:[function(n){return function(t){return function(r){return function(e){return function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m({},u,{state:w(n)(t)(r)(e)(u.state,u.action)})}}}}}],actions:v,selectors:Object.freeze({getState:z,getKeys:_,getAsArray:U,getLength:function(n){return function(t){return _(n)(t).length}},isInitialized:x,get:function(n){return function(t){return function(r){var e=function(n){return P("data")(n)}(n)(r);return null==t?e:Array.isArray(t)?t.map(function(n){return e[n]}):e[t]}}},getBy:function(n){return function(r,e){return function(u){var o=U(n)(u);return Array.isArray(e)?o.filter(function(n){return e.includes(t.at(n,r)[0])}):o.filter(function(n){return e===t.at(n,r)[0]})}}},hasKey:function(n){return function(t){return function(r){return _(n)(r).includes(t)}}}})},B={},C=function(n){return void 0!==n?n:B},I=function(n){return function(){return function(t){return z(n)(t)}}},K={middlewares:[function(n){return function(n){return function(t){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m({},e,{state:function(n){return function(t){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C(r),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.type,a=o.payload;switch(c){case u(n)(t):return a;case f(n)(t):return m({},e,a);case i(n)(t):return C(r);default:return e}}}}}(n)(t)(r)(e.state,e.action)})}}}}}],actions:Object.freeze({set:o,SET:u,reset:c,RESET:i,update:y,UPDATE:f}),selectors:Object.freeze({get:I,isInitialized:function(n){return function(t){return void 0!==n.defaultData?z(n)(t)!==n.defaultData:I(n)()(t)!==B}}})},L=Object.freeze({keyValue:V,simpleObject:K}),M={key:"id",type:"keyValue",prefix:""},N=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=m({},M,t),e=r.key,u=r.type,o=r.prefix,i=r.name,c=r.defaultData,a=L[u];return Object.assign.apply(Object,[function(n){return function(t){return function(r){return function(e){return function(u){return function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=i.type,a={state:o,action:{type:void 0===c?"UNKNOWN":c,payload:i.payload}};return[].concat(E(n.pre||[]),E(n.engine||[]),E(n.post||[])).map(function(n){return n(t)(r)(e)(u)}).forEach(function(n){a=n(a)}),a.state}}}}}}(m({},n,{engine:a.middlewares}))(e)(o)(i)(c),{krfType:u}].concat(E(Object.keys(a.actions).map(function(n){return g({},n,a.actions[n](o)(i))})),E(Object.keys(a.selectors).map(function(n){return g({},n,a.selectors[n](r))}))))}},Y=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},q=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return null==t&&Y(),function(n){return n.engine||n.pre||n.post}(t)?function(r){return N(t)(m({},r,n))}:function(n){return!!n.name||"string"==typeof n}(t)?"string"==typeof t?N()(m({name:t},n)):N()(m({},t,n)):void Y()}},W=q({type:"simpleObject"}),F=q({type:"keyValue"}),G=q();n.simpleObject=W,n.keyValue=F,n.default=G,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
