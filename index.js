!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t(n["k-redux-factory"]={},n._)}(this,function(n,t){"use strict";var r=function(n){return"@@krf/"+n.toUpperCase()},e=function(n){return r("SET_"+n)},u=function(n){return function(t){return{type:e(n),payload:t}}},a=function(n){return r("RESET_"+n)},i=function(n){return function(){return{type:a(n)}}},o=function(n){return r("ADD_"+n)},c=function(n){return r("UPDATE_"+n)},f=function(n){return function(t){return{type:c(n),payload:t}}},d=function(n){return r("REMOVE_"+n)},s=function(n){return r("ADD_OR_UPDATE_"+n)},y=function(n){return r("REPLACE_"+n)},l=function(n){return r("ORDER_BY_"+n)},p=Object.freeze({set:u,SET:e,add:function(n){return function(t){return{type:o(n),payload:t}}},ADD:o,reset:i,RESET:a,remove:function(n){return function(t){return{type:d(n),payload:t}}},REMOVE:d,update:f,UPDATE:c,addOrUpdate:function(n){return function(t){return{type:s(n),payload:t}}},ADD_OR_UPDATE:s,replace:function(n){return function(t){return{type:y(n),payload:t}}},REPLACE:y,orderBy:function(n){return function(t){return{type:l(n),payload:t}}},ORDER_BY:l}),v=function(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n},g=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},m=function(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)},h={data:{},keys:[],array:[],initialized:!1},E=function(n){return function(t,r){return n.array.find(function(n){return n[t]===r})}},O=function(n,r){return{data:t.keyBy(r,n),keys:t.uniq(r.map(function(t){return t[n]})),array:r,initialized:!0}},b=function(n,r,e){var u=void 0,a=e[n];return u=E(r)(n,a)?r.array.map(function(t){return t[n]===a?e:t}):[].concat(m(r.array),[e]),g({},r,{data:g({},r.data,v({},a,e)),keys:t.uniq([].concat(m(r.keys),[a])),array:u,initialized:!0})},A=function(n,t,r){var e=r[n];return g({},t,{data:g({},t.data,v({},e,g({},t.data[e],r))),array:t.array.map(function(t){return t[n]===e?g({},t,r):t})})},k=function(n,t,r){var e=r[n];return g({},t,{data:g({},t.data,v({},e,r)),array:t.array.map(function(t){return t[n]===e?r:t})})},j=function(n,t){return void 0!==t?O(n,t):h},D=function(n){return function(r){return function(u){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(n,u),f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=f.type,v=f.payload;switch(p){case e(r):return O(n,v);case o(r):return b(n,i,v);case s(r):return E(i)(n,v[n])?A(n,i,v):b(n,i,v);case c(r):return E(i)(n,v[n])?A(n,i,v):i;case y(r):return E(i)(n,v[n])?k(n,i,v):i;case l(r):var h=v,D="asc";t.isObjectLike(v)&&(h=v.by,D=v.desc?"desc":"asc");var _=t.orderBy(i.array,t.isString(h)?function(n){return t.get(n,h)}:h,D);return g({},i,{array:_,keys:t.uniq(_.map(function(t){return t[n]}))});case d(r):var R=t.flatten([v]);return g({},i,{data:t.omit(i.data,R),keys:t.without.apply(void 0,[i.keys].concat(m(R))),array:i.array?i.array.filter(function(t){return!R.includes(t[n])}):[]});case a(r):return j(n,u);default:return i}}}}},_=function(n){return function(r){var e=r,u=n.name,a=n.path;return void 0!==a&&a.length>0&&(e=t.at(r,a)[0]),e[u]}},R=function(n){return function(t){return function(r){return _(t)(r)[n]}}},T=R("keys"),z=R("array"),w=R("initialized"),P=function(n){return R("data")(n)},S={middlewares:[function(n){return function(t){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g({},e,{state:D(n)(t)(r)(e.state,e.action)})}}}}],actions:p,selectors:Object.freeze({getState:_,getKeys:T,getAsArray:z,getLength:function(n){return function(t){return T(n)(t).length}},isInitialized:w,get:function(n){return function(t){return function(r){var e=P(n)(r);return t?Array.isArray(t)?t.map(function(n){return e[n]}):e[t]:e}}},getBy:function(n){return function(r,e){return function(u){var a=z(n)(u);return Array.isArray(e)?a.filter(function(n){return e.includes(t.at(n,r)[0])}):a.filter(function(n){return e===t.at(n,r)[0]})}}},hasKey:function(n){return function(t){return function(r){return!!T(n)(r).includes(t)}}}})},U={},B=function(n){return void 0!==n?n:U},V=function(){return function(n){return function(t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(t),u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=u.type,o=u.payload;switch(i){case e(n):return o;case c(n):return g({},r,o);case a(n):return B(t);default:return r}}}}},x=function(n){return function(){return function(t){return _(n)(t)}}},q={middlewares:[function(n){return function(n){return function(t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g({},r,{state:V()(n)(t)(r.state,r.action)})}}}}],actions:Object.freeze({set:u,SET:e,reset:i,RESET:a,update:f,UPDATE:c}),selectors:Object.freeze({get:x,isInitialized:function(n){return function(t){return void 0!==n.defaultData?_(n)(t)!==n.defaultData:x(n)()(t)!==U}}})},L=Object.freeze({keyValue:S,simpleObject:q}),C=function(n){return function(t){return function(r){return function(e){return function(u){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.type,o={state:u,action:{type:void 0===i?"UNKNOWN":i,payload:a.payload}};return[].concat(m(n.pre||[]),m(n.engine||[]),m(n.post||[])).map(function(n){return n(t)(r)(e)}).forEach(function(n){o=n(o)}),o.state}}}}},K=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=t.key,e=t.type,u=void 0===e?"keyValue":e,a=t.prefix,i=void 0===a?"":a,o=t.name,c=t.defaultData,f=L[u];return Object.assign.apply(Object,[C(g({},n,{engine:f.middlewares}))(r)(""+i+o)(c),{krfType:u}].concat(m(Object.keys(f.actions).map(function(n){return v({},n,f.actions[n](""+i+o))})),m(Object.keys(f.selectors).map(function(n){return v({},n,f.selectors[n](t))}))))}},M=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},N=function(n){return n.engine||n.pre||n.post},I=function(n){return!!n.name||"string"==typeof n},Y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return null!==t&&void 0!==t||M(),N(t)?function(r){return K(t)(g({},r,n))}:I(t)?"string"==typeof t?K()(g({name:t},n)):K()(g({},t,n)):void M()}},W=Y({type:"simpleObject"}),F=Y({type:"keyValue"}),G=Y();n.simpleObject=W,n.keyValue=F,n.default=G,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
