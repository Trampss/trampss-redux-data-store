!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash/at"),require("lodash/omit"),require("lodash/uniq"),require("lodash/without"),require("lodash/keyBy")):"function"==typeof define&&define.amd?define(["exports","lodash/at","lodash/omit","lodash/uniq","lodash/without","lodash/keyBy"],e):e(t["trampss-redux-factory"]=t["trampss-redux-factory"]||{},t._at,t._omit,t._uniq,t._without,t._keyBy)}(this,function(t,e,n,r,a,u){"use strict";e=e&&"default"in e?e.default:e,n=n&&"default"in n?n.default:n,r=r&&"default"in r?r.default:r,a=a&&"default"in a?a.default:a,u=u&&"default"in u?u.default:u;var i=function(t){return"@trampss/"+t.toUpperCase()},o=function(t){return i("SET_"+t)},c=function(t){return i("RESET_"+t)},f=function(t){return i("ADD_"+t)},d=function(t){return i("UPDATE_"+t)},s=function(t){return i("REMOVE_"+t)},l=Object.freeze({SET:o,set:function(t){return function(e){return{type:o(t),payload:e}}},RESET:c,reset:function(t){return function(){return{type:c(t)}}},ADD:f,add:function(t){return function(e){return{type:f(t),payload:e}}},UPDATE:d,update:function(t){return function(e){return{type:d(t),payload:e}}},REMOVE:s,remove:function(t){return function(e){return{type:s(t),payload:e}}}}),y=function(t){return function(n){var r=n;return void 0!==t.path&&(r=e(n,t.path)[0]),r[t.name]}},p=function(t){return function(e){return function(n){return y(e)(n)[t]}}},v=p("keys"),h=p("array"),g=p("initialized"),m=function(t){return p("data")(t)},b=Object.freeze({getState:y,getKeys:v,getAsArray:h,getLength:function(t){var e=t.path,n=t.name;return function(t){return v({path:e,name:n})(t).length}},isInitialized:g,getData:m,get:function(t){var e=t.path,n=t.name;return function(t){return function(r){var a=m({path:e,name:n})(r);return t?Array.isArray(t)?t.map(function(t){return a[t]}):a[t]:a}}},getBy:function(t){var n=t.path,r=t.name;return function(t,a){return function(u){var i=h({path:n,name:r})(u);return Array.isArray(a)?i.filter(function(n){return a.includes(e(n,t)[0])}):i.filter(function(n){return a===e(n,t)[0]})}}}}),O=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},k={data:{},keys:[],array:[],initialized:!1},A=function(t){return function(e,n){return t.array.find(function(t){return t[e]===n})}},w=function(t){return function(e){return function(){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=l.type,p=l.payload;switch(y){case o(e):return{data:u(p,t),keys:r(p.map(function(e){return e[t]})),array:p,initialized:!0};case f(e):var v=void 0,h=p[t];return v=A(i)(t,h)?i.array.map(function(e){return e[t]===h?p:e}):[].concat(j(i.array),[p]),E({},i,{data:E({},i.data,O({},h,p)),keys:r([].concat(j(i.keys),[h])),array:v,initialized:!0});case d(e):var g=p[t];return A(i)(t,g)?E({},i,{data:E({},i.data,O({},g,E({},i.data[g],p))),array:i.array.map(function(e){return e[t]===g?E({},e,p):e})}):i;case s(e):return E({},i,{data:n(i.data,[p]),keys:a(i.keys,p),array:i.array?i.array.filter(function(e){return e[t]!==p}):[]});case c(e):return k;default:return i}}}}},z={middlewares:[function(t){return function(e){return function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E({},r,{state:w(t)(e)(n)(r.state,r.action)})}}}}],actions:["set","add","reset","remove","update"],selectorsEnabled:["getState","getKeys","getAsArray","getLength","isInitialized","get","getBy"]},_={},D=function(){return function(t){return function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e||_,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.type,u=r.payload;switch(a){case o(t):return{data:u,initialized:!0};case d(t):return E({},n,{data:E({},n.data,u)});case c(t):return e||_;default:return n}}}}},q=function(t){return function(){return function(e){return y(t)(e)}}},S={middlewares:[function(t){return function(t){return function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E({},n,{state:D()(t)(e)(n.state,n.action)})}}}}],actions:["set","reset","update"],selectorsEnabled:["getState","isInitialized","get"],selectors:Object.freeze({get:q,isInitialized:function(t){return function(e){return void 0!==t.defaultData?e[t.name]!==t.defaultData:q(t)()(e)!==_}}})},T=Object.freeze({keyValue:z,simpleObject:S}),x=function(t){return function(e){return function(n){return function(r){return function(a){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=u.type,o={state:a,action:{type:void 0===i?"UNKNOWN":i,payload:u.payload}};return[].concat(j(t.pre||[]),j(t.engine||[]),j(t.post||[])).map(function(t){return t(e)(n)(r)}).forEach(function(t){o=t(o)}),o.state}}}}},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=e.key,r=e.type,a=void 0===r?"keyValue":r,u=e.prefix,i=void 0===u?"":u,o=e.name,c=e.defaultData,f=T[a];return Object.assign.apply(Object,[x(E({},t,{engine:f.middlewares}))(n)(""+i+o)(c),{trampssType:a}].concat(j(Object.keys(l).filter(function(t){return f.actions.includes(t.toLowerCase())}).map(function(t){return O({},t,l[t](""+i+o))})),j(f.selectorsEnabled.map(function(t){var n=f.selectors&&f.selectors[t]?f.selectors[t]:b[t];return O({},t,n(e))}))))}},B=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},P=function(t){return t.engine||t.pre||t.post},I=function(t){return!!t.name||"string"==typeof t},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){return null!==e&&void 0!==e||B(),P(e)?function(n){return V(e)(E({},n,t))}:I(e)?"string"==typeof e?V()(E({name:e},t)):V()(E({},e,t)):void B()}},U=R({type:"simpleObject"}),K=R({type:"keyValue"}),L=R();t.simpleObject=U,t.keyValue=K,t.default=L,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
