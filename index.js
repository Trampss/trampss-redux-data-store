!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lodash/flatten"),require("lodash/isString"),require("lodash/isObjectLike"),require("lodash/get"),require("lodash/orderBy"),require("lodash/omit"),require("lodash/uniq"),require("lodash/without"),require("lodash/keyBy"),require("lodash/at")):"function"==typeof define&&define.amd?define(["exports","lodash/flatten","lodash/isString","lodash/isObjectLike","lodash/get","lodash/orderBy","lodash/omit","lodash/uniq","lodash/without","lodash/keyBy","lodash/at"],n):n(t["k-redux-factory"]=t["k-redux-factory"]||{},t._flatten,t._isString,t._isObjectLike,t._get,t._orderBy,t._omit,t._uniq,t._without,t._keyBy,t._at)}(this,function(t,n,r,e,u,a,i,o,c,f,d){"use strict";n=n&&"default"in n?n.default:n,r=r&&"default"in r?r.default:r,e=e&&"default"in e?e.default:e,u=u&&"default"in u?u.default:u,a=a&&"default"in a?a.default:a,i=i&&"default"in i?i.default:i,o=o&&"default"in o?o.default:o,c=c&&"default"in c?c.default:c,f=f&&"default"in f?f.default:f,d=d&&"default"in d?d.default:d;var l=function(t){return"@@krf/"+t.toUpperCase()},s=function(t){return l("SET_"+t)},y=function(t){return function(n){return{type:s(t),payload:n}}},p=function(t){return l("RESET_"+t)},h=function(t){return function(){return{type:p(t)}}},v=function(t){return l("ADD_"+t)},g=function(t){return l("UPDATE_"+t)},m=function(t){return function(n){return{type:g(t),payload:n}}},O=function(t){return l("REMOVE_"+t)},E=function(t){return l("ADD_OR_UPDATE_"+t)},_=function(t){return l("REPLACE_"+t)},b=function(t){return l("ORDER_BY_"+t)},k=function(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t},j=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},A=function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)},D={data:{},keys:[],array:[],initialized:!1},q=function(t){return function(n,r){return t.array.find(function(t){return t[n]===r})}},R=function(t,n){return{data:f(n,t),keys:o(n.map(function(n){return n[t]})),array:n,initialized:!0}},w=function(t,n,r){var e=void 0,u=r[t];return e=q(n)(t,u)?n.array.map(function(n){return n[t]===u?r:n}):[].concat(A(n.array),[r]),j({},n,{data:j({},n.data,k({},u,r)),keys:o([].concat(A(n.keys),[u])),array:e,initialized:!0})},T=function(t,n,r){var e=r[t];return j({},n,{data:j({},n.data,k({},e,j({},n.data[e],r))),array:n.array.map(function(n){return n[t]===e?j({},n,r):n})})},z=function(t,n,r){var e=r[t];return j({},n,{data:j({},n.data,k({},e,r)),array:n.array.map(function(n){return n[t]===e?r:n})})},B=function(t,n){return void 0!==n?R(t,n):D},P=function(t){return function(f){return function(d){return function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(t,d),y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=y.type,m=y.payload;switch(h){case s(f):return R(t,m);case v(f):return w(t,l,m);case E(f):return q(l)(t,m[t])?T(t,l,m):w(t,l,m);case g(f):return q(l)(t,m[t])?T(t,l,m):l;case _(f):return q(l)(t,m[t])?z(t,l,m):l;case b(f):var k=m,D="asc";e(m)&&(k=m.by,D=m.desc?"desc":"asc");var P=a(l.array,r(k)?function(t){return u(t,k)}:k,D);return j({},l,{array:P,keys:o(P.map(function(n){return n[t]}))});case O(f):var S=n([m]);return j({},l,{data:i(l.data,S),keys:c.apply(void 0,[l.keys].concat(A(S))),array:l.array?l.array.filter(function(n){return!S.includes(n[t])}):[]});case p(f):return B(t,d);default:return l}}}}},S=Object.freeze({set:y,SET:s,add:function(t){return function(n){return{type:v(t),payload:n}}},ADD:v,reset:h,RESET:p,remove:function(t){return function(n){return{type:O(t),payload:n}}},REMOVE:O,update:m,UPDATE:g,addOrUpdate:function(t){return function(n){return{type:E(t),payload:n}}},ADD_OR_UPDATE:E,replace:function(t){return function(n){return{type:_(t),payload:n}}},REPLACE:_,orderBy:function(t){return function(n){return{type:b(t),payload:n}}},ORDER_BY:b}),U=function(t){return function(n){var r=n;return void 0!==t.path&&(r=d(n,t.path)[0]),r[t.name]}},x=function(t){return function(n){return function(r){return U(n)(r)[t]}}},L=x("keys"),V=x("array"),C=x("initialized"),M=function(t){return x("data")(t)},N={middlewares:[function(t){return function(n){return function(r){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j({},e,{state:P(t)(n)(r)(e.state,e.action)})}}}}],actions:S,selectors:Object.freeze({getState:U,getKeys:L,getAsArray:V,getLength:function(t){return function(n){return L(t)(n).length}},isInitialized:C,get:function(t){return function(n){return function(r){var e=M(t)(r);return n?Array.isArray(n)?n.map(function(t){return e[t]}):e[n]:e}}},getBy:function(t){return function(n,r){return function(e){var u=V(t)(e);return Array.isArray(r)?u.filter(function(t){return r.includes(d(t,n)[0])}):u.filter(function(t){return r===d(t,n)[0]})}}}})},I={},K=function(t){return void 0!==t?t:I},Y=function(){return function(t){return function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(n),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e.type,a=e.payload;switch(u){case s(t):return a;case g(t):return j({},r,a);case p(t):return K(n);default:return r}}}}},W=function(t){return function(){return function(n){return U(t)(n)}}},F={middlewares:[function(t){return function(t){return function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j({},r,{state:Y()(t)(n)(r.state,r.action)})}}}}],actions:Object.freeze({set:y,SET:s,reset:h,RESET:p,update:m,UPDATE:g}),selectors:Object.freeze({get:W,isInitialized:function(t){return function(n){return void 0!==t.defaultData?U(t)(n)!==t.defaultData:W(t)()(n)!==I}}})},G=Object.freeze({keyValue:N,simpleObject:F}),H=function(t){return function(n){return function(r){return function(e){return function(u){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.type,o={state:u,action:{type:void 0===i?"UNKNOWN":i,payload:a.payload}};return[].concat(A(t.pre||[]),A(t.engine||[]),A(t.post||[])).map(function(t){return t(n)(r)(e)}).forEach(function(t){o=t(o)}),o.state}}}}},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r=n.key,e=n.type,u=void 0===e?"keyValue":e,a=n.prefix,i=void 0===a?"":a,o=n.name,c=n.defaultData,f=G[u];return Object.assign.apply(Object,[H(j({},t,{engine:f.middlewares}))(r)(""+i+o)(c),{krfType:u}].concat(A(Object.keys(f.actions).map(function(t){return k({},t,f.actions[t](""+i+o))})),A(Object.keys(f.selectors).map(function(t){return k({},t,f.selectors[t](n))}))))}},Q=function(){throw Error("parameter is not a middleware configuration, nor a factory option object.")},X=function(t){return t.engine||t.pre||t.post},Z=function(t){return!!t.name||"string"==typeof t},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){return null!==n&&void 0!==n||Q(),X(n)?function(r){return J(n)(j({},r,t))}:Z(n)?"string"==typeof n?J()(j({name:n},t)):J()(j({},n,t)):void Q()}},tt=$({type:"simpleObject"}),nt=$({type:"keyValue"}),rt=$();t.simpleObject=tt,t.keyValue=nt,t.default=rt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
